# Funnel Monitor — модуль мониторинга воронок продаж в Битрикс24

Модуль для мониторинга воронок продаж на наличие сделок, превышающих максимальный крайний срок.

## Функциональность
После установки модуля в административной панели доступно:
- Выбор воронок — настройка необходимых воронок продаж для отслеживания.
- Настройка сроков — назначение максимального количества дней после крайнего срока для каждой воронки.
- Управление уведомлениями — выбор пользователей Битрикс24 для получения оповещений о просроченных сделках.
- Гибкий запуск — проверка в ручном режиме или автоматически через cron

## Требования

1. Bitrix CMS (версия 20.x и выше) 
2. PHP 8.0+

## Установка

### Способ 1: Клонирование репозитория
```bash
git clone https://github.com/VasinDK/funnel.git /local/modules/dk.vasin/
```

### Способ 2: Ручная установка
1. Скачайте архив модуля
2. Распакуйте в папку /local/modules/dk.vasin/

### Активация модуля
1. В админ-панели Битрикс24 перейдите в Marketplace → Установленные решения
2. Нажмите "Установить".

## Настройка
Настройка модуля осуществляется по адресу: `админ.панель -> сервисы -> Vasin`

### Этапы настройки:
1. Выбор воронок — отметьте воронки продаж для мониторинга
2. Настройка сроков — укажите максимальное количество дней для каждой воронки
3. Назначение ответственных — выберите пользователей для получения уведомлений
4. Сохранение настроек

## Автоматизация. Запуск проверки через Cron
Для автоматической проверки добавьте в cron задание:
```bash
0 7 * * * curl -X POST "https://your-domain.ru/bitrix/services/main/ajax.php?action=dk:vasin.funnelMonitor.check"
```
